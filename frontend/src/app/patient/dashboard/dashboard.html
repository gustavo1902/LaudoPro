<div class="container">
  <header class="page-header" *ngIf="!isLoading && !errorMessage">
    <h1 class="page-header__title">
      Bem-vindo(a), <span class="page-header__title--highlight">{{ patientProfile.name }}</span>!
    </h1>
    <p class="page-header__subtitle">Aqui está um resumo da sua atividade na LaudoPro.</p>
  </header>

  <div *ngIf="isLoading" class="loading-message">Carregando informações...</div>
  <div *ngIf="errorMessage && !isLoading" class="alert alert--danger">{{ errorMessage }}</div>

  <div *ngIf="!isLoading && !errorMessage" class="dashboard-layout">
    <main class="dashboard-layout__main">
      <div class="stats-grid">
        <div class="stats-card stats-card--total">
          <h3 class="stats-card__title">Total de Exames</h3>
          <p class="stats-card__value">{{ stats.total }}</p>
        </div>
        <div class="stats-card stats-card--completed">
          <h3 class="stats-card__title">Laudos Disponíveis</h3>
          <p class="stats-card__value">{{ stats.completed }}</p>
        </div>
        <div class="stats-card stats-card--pending">
          <h3 class="stats-card__title">Exames Pendentes</h3>
          <p class="stats-card__value">{{ stats.pending }}</p>
        </div>
      </div>

      <div class="card">
        <h2 class="card__title">Seus Últimos Exames</h2>
        <div class="table-wrapper">
          <table class="results-table">
            <thead>
              <tr class="results-table__row-header">
                <th class="results-table__cell-header">Tipo de Exame</th>
                <th class="results-table__cell-header">Data</th>
                <th class="results-table__cell-header">Status</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let exam of recentExams" class="results-table__row">
                <td class="results-table__cell">{{ exam.type }}</td>
                <td class="results-table__cell">{{ exam.date | date:'dd/MM/yyyy' }}</td>
                <td class="results-table__cell">
                  <span class="status-badge" [ngClass]="{
                    'status-badge--pendente': exam.status === 'PENDENTE',
                    'status-badge--concluido': exam.status === 'CONCLUÍDO',
                    'status-badge--cancelado': exam.status === 'CANCELADO'
                  }">{{ exam.status }}</span>
                </td>
              </tr>
              <tr *ngIf="recentExams.length === 0">
                <td colspan="3" class="results-table__cell--empty">Você ainda não possui exames.</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </main>

    <aside class="dashboard-layout__sidebar">
      <div class="card">
        <h2 class="card__title">Acesso Rápido</h2>
        <div class="quick-links">
          <a routerLink="/paciente/meus-exames" class="button button--primary">Ver Todos os Exames</a>
          <a routerLink="/paciente/perfil" class="button button--secondary">Atualizar Meu Perfil</a>
        </div>
      </div>
    </aside>
  </div>
</div>