<div class="container">
  <header class="page-header">
    <h1 class="page-header__title">Dashboard Administrativo</h1>
  </header>

  <div class="card filter-card">
    <h3 class="card__title">Filtrar por Período</h3>
    <form [formGroup]="filterForm" class="filter-form">
      <div class="form-group">
        <label for="startDate" class="form-group__label">De</label>
        <input type="date" id="startDate" formControlName="startDate" class="form-group__input">
      </div>
      <div class="form-group">
        <label for="endDate" class="form-group__label">Até</label>
        <input type="date" id="endDate" formControlName="endDate" class="form-group__input">
      </div>
      <button type="button" (click)="resetFilters()" class="button button--secondary">
        Limpar Filtros
      </button>
    </form>
  </div>

  <div *ngIf="isLoading" class="loading-message">Carregando estatísticas...</div>
  <div *ngIf="errorMessage" class="alert alert--danger">{{ errorMessage }}</div>

  <div *ngIf="!isLoading" class="stats-grid">
    <div class="stats-card stats-card--exams">
      <div class="stats-card__content">
        <h2 class="stats-card__title">Total de Exames</h2>
        <p class="stats-card__value">{{ stats.exams }}</p>
      </div>
      <div class="stats-card__icon">
        </div>
    </div>
    <div class="stats-card stats-card--patients">
      <div class="stats-card__content">
        <h2 class="stats-card__title">Total de Pacientes</h2>
        <p class="stats-card__value">{{ stats.patients }}</p>
      </div>
      <div class="stats-card__icon">
        </div>
    </div>
    <div class="stats-card stats-card--completed">
      <div class="stats-card__content">
        <h2 class="stats-card__title">Exames Concluídos</h2>
        <p class="stats-card__value">{{ stats.completedExams || 0 }}</p>
      </div>
       <div class="stats-card__icon">
        </div>
    </div>
  </div>

  <div *ngIf="!isLoading && examTypes.length > 0" class="card chart-card">
    <h3 class="card__title">Exames por Tipo</h3>
    <div class="chart-card__list">
      <div *ngFor="let type of examTypes" class="progress-bar">
        <div class="progress-bar__info">
          <span class="progress-bar__label">{{ type.type }}</span>
          <span class="progress-bar__value">{{ type.count }}</span>
        </div>
        <div class="progress-bar__track">
          <div class="progress-bar__fill" [style.width.%]="(type.count / maxCount) * 100"></div>
        </div>
      </div>
    </div>
  </div>
</div>