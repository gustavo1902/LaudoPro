<div class="container">
  <header class="page-header">
    <h1 class="page-header__title">Gestão de Exames</h1>
    <p class="page-header__subtitle">Gerencie todos os exames médicos do sistema</p>
  </header>

  <div *ngIf="successMessage" class="alert alert--success">{{ successMessage }}</div>
  <div *ngIf="errorMessage" class="alert alert--danger">{{ errorMessage }}</div>

  <div class="card filter-card">
    <h2 class="card__title">Filtros de Busca</h2>
    <form [formGroup]="filterForm" class="filter-form">
      <div class="form-group">
        <label for="patient" class="form-group__label">Paciente</label>
        <select id="patient" formControlName="patientId" class="form-group__input">
          <option value="">Todos os Pacientes</option>
          <option *ngFor="let patient of patients" [value]="patient.id">{{ patient.name }}</option>
        </select>
      </div>
      <div class="form-group">
        <label for="status" class="form-group__label">Status</label>
        <select id="status" formControlName="status" class="form-group__input">
          <option value="">Todos os Status</option>
          <option value="PENDENTE">Pendente</option>
          <option value="CONCLUÍDO">Concluído</option>
          <option value="CANCELADO">Cancelado</option>
        </select>
      </div>
      <div class="form-group">
        <label for="date" class="form-group__label">Data do Exame</label>
        <input type="date" id="date" formControlName="date" class="form-group__input">
      </div>
      <button type="button" (click)="resetFilters()" class="button button--secondary">
        Limpar Filtros
      </button>
    </form>
  </div>

  <div class="card">
    <h2 class="card__title">Lista de Exames</h2>
    <div class="table-wrapper">
      <table class="results-table">
        <thead>
          <tr class="results-table__row-header">
            <th class="results-table__cell-header">ID</th>
            <th class="results-table__cell-header">Paciente</th>
            <th class="results-table__cell-header">Tipo</th>
            <th class="results-table__cell-header">Data</th>
            <th class="results-table__cell-header">Status</th>
            <th class="results-table__cell-header results-table__cell-header--center">Ações</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let exam of exams" class="results-table__row">
            <td class="results-table__cell">#{{ exam.id }}</td>
            <td class="results-table__cell">{{ exam.patient.name }}</td>
            <td class="results-table__cell">{{ exam.tipo }}</td>
            <td class="results-table__cell">{{ exam.data | date:'dd/MM/yyyy' }}</td>
            <td class="results-table__cell">
              <span class="status-badge" [ngClass]="{
                'status-badge--pendente': exam.status === 'PENDENTE',
                'status-badge--concluido': exam.status === 'CONCLUÍDO',
                'status-badge--cancelado': exam.status === 'CANCELADO'
              }">
                {{ exam.status }}
              </span>
            </td>
            <td class="results-table__cell results-table__cell--actions">
                <button class="button button--edit">Editar</button>
                <button class="button button--delete">Excluir</button>
            </td>
          </tr>
          <tr *ngIf="!exams || exams.length === 0">
            <td colspan="6" class="results-table__cell--empty">
              Nenhum exame encontrado.
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>